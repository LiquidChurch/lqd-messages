window.LqdMAdmin=window.LqdMAdmin||{};(function(c, f, b, g){var j=this;var a=b(".sort-btn"),h=b(".update-btn"),d=b(".reset-btn"),i=b(".lqdm-message-config-wrap"),e=b(".message-config-form");a.click(function(m){var l=this;if(b(l).hasClass("single")){var k=b(this).parents("form");b(k[0]).find('input[type="number"]').each(function(o, n){b(n).val(o+1);j.updateInputClass(n)})}else{var k=b(this).siblings("ul");b(k[0]).find("form").each(function(o, n){b(n).find('input[type="number"]').each(function(q, p){b(p).val(q+1);j.updateInputClass(p)})})}});h.click(function(o){var m=this;if(!b(m).hasClass("single")){var k=b(this).siblings("ul");var p,n=[],l=true;b(k[0]).find("form").each(function(r, q){var s=true;p=b(q);p.find('input[type="number"][required]').each(function(v, u){var t=null;t=j.updateInputClass(u);if(t==false){s=false}});if(s==true){n.push(p.serialize())}else{l=false}});if(l==true){j.blockUI();b.ajax({url:c.ajaxurl,method:"POST",data:{action:"message_message_config_all_series_update",nonce:g.ajax_nonce,formData:n},dataType:"json"}).done(function(q){b.each(q,function(s, r){$form=i.find("#series-"+s);b.each(r,function(v, u){var t=i.find('label[data-post-id="'+v+'"]');j.modifyLabel(t,u);j.setFormInputValue($form)})})}).always(function(q){j.unblockUI()})}else{alert(g.required_message)}}});d.click(function(m){var l=this;if(b(l).hasClass("single")){var k=b(this).parents("form");b(k)[0].reset();b(k[0]).find('input[type="number"]').each(function(o, n){j.clearInputClass(n)})}else{var k=b(this).siblings("ul");b(k[0]).find("form").each(function(o, n){b(n)[0].reset();b(n).find('input[type="number"]').each(function(q, p){j.clearInputClass(p)})})}});i.find('input[type="number"][required]').each(function(l, k){b(k).keyup(function(m){j.updateInputClass(this)})});this.blockUI=function(k){if(typeof k!="undefined"){k.block({message:'<div class="vcenter"><div><img width="40px" src="'+g.path+'assets/img/spinner.gif" /></div><div><h2>'+g.blockui_message+"</h2></div></div>"})}else{b.blockUI({message:'<div class="vcenter"><div><img width="40px" src="'+g.path+'assets/img/spinner.gif" /></div><div><h2>'+g.blockui_message+"</h2></div></div>"})}};this.unblockUI=function(k){if(typeof k!="undefined"){k.unblock()}else{b.unblockUI()}};e.on("submit",function(l){l.preventDefault();var k=b(this);j.blockUI(k);b.ajax({url:c.ajaxurl,method:"POST",data:{action:"message_message_config_single_series_update",nonce:g.ajax_nonce,formData:k.serialize()},dataType:"json"}).done(function(m){b.each(m,function(p, o){var n=i.find('label[data-post-id="'+p+'"]');j.modifyLabel(n,o);j.setFormInputValue(k)})}).always(function(m){j.unblockUI(k)})});this.updateInputClass=function(k){if(b(k).val()!=""){b(k).addClass("success");b(k).removeClass("error");return true}else{b(k).addClass("error");b(k).removeClass("success");return false}};this.clearInputClass=function(k){b(k).removeClass("error");b(k).removeClass("success")};this.modifyLabel=function(l, k){if(k.status!=false){l.show();l.removeClass("hidden");l.addClass("success");l.html(k.message);setTimeout(function(){l.hide();l.removeClass("success");l.addClass("hidden");l.html("")},20000)}};this.setFormInputValue=function(k){k.find('input[type="number"][required]').each(function(m, l){b(l).attr("value",b(l).val())})}}(window,document,jQuery,LqdMAdmin));
